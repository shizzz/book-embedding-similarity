<h2>Книги похожие на <code>{{ base_book.title }}</code></h2>
<p class="elapsed">Время выполнения: {{ elapsed | round(3) }} сек</p>

<table border="1" cellpadding="6" cellspacing="0">
    <thead>
        <tr>
            <th>#</th>
            <th>Score (%)</th>
            <th>Файл</th>
            <th>Название</th>
            <th>Авторы</th>
            <th>Оценка</th>
        </tr>
    </thead>
    <tbody>
        {% for item in rows %}
        <tr data-candidate="{{ item.file_name }}" data-source="{{ base_book.file_name }}">
            <td>{{ loop.index }}</td>
            <td>{{ (item.score * 100) | round(2) }}</td>
            <td>{{ item.file_name }}</td>
            <td><a href="{{ make_lib_url(item.title, 'title') }}" target="_blank">{{ item.title }}</a></td>
            <td class="authors">
                {% if item.authors %}
                    {% for author in item.authors %}
                        <a href="{{ make_lib_url(author, 'author') }}"
                        class="author-link"
                        target="_blank">
                            {{ author }}
                        </a>{% if not loop.last %}, {% endif %}
                    {% endfor %}
                {% else %}
                    —
                {% endif %}
            </td>
            <td class="feedback-cell">
                <div class="star-rating" data-current="{{ item.rating if item.rating is defined else 0 }}">
                    <span class="reset-rating"
                        data-value="0"
                        title="Сбросить">✖</span>
                    {% for i in range(1, 6) %}
                        <span class="star"
                            data-value="{{ i }}"
                            title="Оценка {{ i }}">★</span>
                    {% endfor %}
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
